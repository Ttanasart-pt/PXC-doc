<link rel="stylesheet" href="../styles.css">

<h1>Blend</h1>
<p class="subtitle">Blend 2 images using different blendmodes.</p>
<br><br>

<table class = "summary-table">
    <tr><th class="head" colspan="2"><p>Node Data</p></th></tr><tr><th colspan="2"><img s_node_blend></th></tr><tr><th colspan="2" class="summary-topic"><p>Display name</p></th></tr><tr><th colspan="2" class="summary-content"><p>Blend</p></th></tr><tr><th colspan="2" class="summary-topic"><p>Internal name</p></th></tr><tr><th colspan="2" class="summary-content"><p>Node_Blend</p></th></tr><tr height="8px"></tr><tr><th class="head" colspan="2"><p>Inheritances</p></th></tr><tr><th colspan="2" class="inheritance-block"><a href="../index.html">node</a></th></tr><tr><th colspan="2" class="inheritance-block"><a href="../array_processor.html">node_processor</a></th></tr><tr><th colspan="2" class="inheritance-block current"><a href="../_index/blend.html">node_blend</a></th></tr><tr height="8px"></tr>
<tr><th class="head" colspan="2"><p>Inputs</p></th></tr>
<tr><th colspan="2" class="summary-topic"><p>node_blend</p></th></tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ff6b97">surface</p></td>
            <td><p>Background</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ff6b97">surface</p></td>
            <td><p>Foreground</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ff9166">integer</p></td>
            <td><p>Blend Mode</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ffe478">float</p></td>
            <td><p>Opacity</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ff6b97">surface</p></td>
            <td><p>Mask</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ff9166">integer</p></td>
            <td><p>Fill Mode</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ff9166">integer</p></td>
            <td><p>Output Dimension</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ff9166">integer</p></td>
            <td><p>Constant Dimension</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #8c3f5d">boolean</p></td>
            <td><p>Active</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #8c3f5d">boolean</p></td>
            <td><p>Preserve Alpha</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ff9166">integer</p></td>
            <td><p>Horizontal Align</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ff9166">integer</p></td>
            <td><p>Vertical Align</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #8c3f5d">boolean</p></td>
            <td><p>Invert Mask</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ffe478">float</p></td>
            <td><p>Mask Feather</p></td>
        </tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ffe478">float</p></td>
            <td><p>Position</p></td>
        </tr>
<tr height="8px"></tr>
<tr><th class="head" colspan="2"><p>Outputs</p></th></tr>
<tr><th colspan="2" class="summary-topic"><p>node_blend</p></th></tr><tr>
            <td class="summary-topic" style="width: 60px"><p style="color: #ff6b97">surface</p></td>
            <td><p>Surface Out</p></td>
        </tr>

</table><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<p>Blending surfaces is a fundamental step in any VFX process. Blend node allows you to combine 2 surfaces 
under different blend mode.</p>
<br><br>
<h2>Blend Modes</h2>
<br>
<p><span class="junction" style="border-color: #ff9166AA">Blend Mode</span> control how the surface is being mixed. Blend modes available in the this node are:</p>
<br>
<p>The examples are blend of 2 surfaces:</p>
<br>
<img blend_sample>
<br>
<table class="ccc203050">
    <tr>
        <th>Mode</th>
        <th>Operation</th>
        <th>Example</th>
    </tr>
    <tr>
        <td>Normal</td>
        <td>$$C_{out} = C_{fg}C_{fg.a} + C_{bg}(1-C_{fg.a})$$</td>
        <td><img-deco blend_normal></td>
    </tr>
    <tr>
        <td>Add</td>
        <td>$$C_{out} = C_{fg} + C_{bg}$$</td>
        <td><img-deco blend_add></td>
    </tr>
    <tr>
        <td>Subtract</td>
        <td>$$C_{out} = C_{fg} - C_{bg}$$</td>
        <td><img-deco blend_subtract></td>
    </tr>
    <tr>
        <td>Multiply</td>
        <td>$$C_{out} = C_{fg}C_{bg}$$</td>
        <td><img-deco blend_multiply></td>
    </tr>
    <tr>
        <td>Screen</td>
        <td>$$C_{out} = 1 - (1-C_{fg})(1-C_{bg})$$</td>
        <td><img-deco blend_screen></td>
    </tr>
    <tr>
        <td>Overlay</td>
        <td>$$C_{out} = \begin {cases} 2C_{fg}C_{bg} & C_{fg} < 0.5 \\ 1 - 2(1-C_{fg})(1-C_{bg}) & C_{fg} \ge 0.5 \end {cases}$$</td>
        <td><img-deco blend_overlay></td>
    </tr>
    <tr>
        <td>Hue</td>
        <td>Transfer the hue of the foreground to the background</td>
        <td><img-deco blend_hue></td>
    </tr>
    <tr>
        <td>Saturation</td>
        <td>Transfer the saturation of the foreground to the background</td>
        <td><img-deco blend_saturation></td>
    </tr>
    <tr>
        <td>Luminosity</td>
        <td>Transfer the luminosity of the foreground to the background</td>
        <td><img-deco blend_luminosity></td>
    </tr>
    <tr>
        <td>Maximum</td>
        <td>$$C_{out} = max(C_{fg}, C_{bg})$$</td>
        <td><img-deco blend_maximum></td>
    </tr>
    <tr>
        <td>Minimum</td>
        <td>$$C_{out} = min(C_{fg}, C_{bg})$$</td>
        <td><img-deco blend_minimum></td>
    </tr>
    <tr>
        <td>Replace</td>
        <td>$$C_{out} = C_{fg}$$</td>
        <td><img-deco blend_replace></td>
    </tr>
    <tr>
        <td>Difference</td>
        <td>$$C_{out} = |C_{fg} - C_{bg}|$$</td>
        <td><img-deco blend_difference></td>
    </tr>
</table>
<br>
<h3>Opacity</h3>
<br>
<p>The intensity of the effect will be multiply by the <span class="junction" style="border-color: #ffe478AA">Opacity</span> property.</p>
<br>
<h3>Preserve Alpha</h3>
<br>
<p>Blend operation apply to all channel including alpha channel. Which mean some operation may erase the 
alpha channel of the original image. To exclude the alpha calculation, set <span class="junction" style="border-color: #8c3f5dAA">Preserve Alpha</span> to true.</p>
<br><br>
<h2>Dimension Mixing</h2>
<br>
<p>When blending surfaces of different sizes. You can set the blending behaviour using several properties:</p>
<br>
<h3>Filling</h3>
<br>
<p>The <span class="junction" style="border-color: #ff9166AA">Fill Mode</span> property control the behaviour of the smaller surface.</p>
<br>
<table class="cc4060">
    <tr>
        <th>Mode</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>None</td>
        <td>Do nothing, place smaller surface directly.</td>
    </tr>
    <tr>
        <td>Stretch</td>
        <td>Stretch the smaller surface to fit the larger surface.</td>
    </tr>
    <tr>
        <td>Tile</td>
        <td>Tile the smaller surface to fit the larger surface.</td>
    </tr>
</table>
<br>
<h3>Alignment</h3>
<br>
<p>When <span class="junction" style="border-color: #ff9166AA">Fill Mode</span> is set to None, you can move the foreground freely in the preview panel.</p>